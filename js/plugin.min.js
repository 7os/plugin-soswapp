/*! 7OS -Web plugin: https://github.com/7os/plugin-soswapp
  ! Requires 7os/theme-soswapp available @ https://github.com/7os/theme-soswapp
  ! Requires 7os/js-generic-soswapp available @ https://github.com/7os/js-generic-soswapp
*/
if(typeof sos=="undefined"){window.sos={}}if(typeof sos.config!=="object"){sos.config={}}sos.alert=function(c,a){var j={type:"info",tymout:0,exit:"Okay"};c=c.replace(/\\r\\n/g,"<br>").replace(/\\n/g,"<br>");var g={type:["info","message","error","progress","success"],exit:["Okay","Close","Continue"]};if(a&&typeof a=="object"){if(in_array(a.type,g.type)){j.type=a.type}if(a.exit!==undefined){j.exit=a.exit}}var d={info:"Okay",message:"Okay",error:"Close",progress:"",success:"Continue"};var h={info:' <i class="fas fa-info fa-2x"></i> ',error:' <i class="fas fa-times fa-2x"></i> ',success:' <i class="fas fa-check fa-2x"></i> ',message:' <i class="fas fa-info-circle fa-2x"></i> ',progress:' <i class="fas fa-spinner fa-2x fa-spin"></i> '};var f={info:' <i class="fas fa-info-circle"></i> ',error:' <i class="fas fa-times"></i> ',success:' <i class="fas fa-check"></i> ',message:' <i class="fas fa-arrow-right"></i> ',progress:""};var e={info:"yellow",error:"red",success:"green",message:"white",progress:"blue"};if($(document).find("#sos-alert-cover").length>0){removeAlert()}var b='<div id="sos-alert-cover"> <div id="sos-alert" class="alert '+j.type+' drop-shadow"> <div id="sos-alert-content">';if(j.type=="progress"){b+=' <p class="align-c"> '+h[j.type]+"</p>"}b+=c;b+="</div> <footer>";if(j.type!=="progress"&&j.exit!==false){if(typeof j.exit!=="boolean"||parseBool(j.exit)!=false){if(in_array(j.exit,d)){b+='  <button type="button" class="btn '+e[j.type]+'" onclick="removeAlert();">'+f[j.type]+d[j.type]+"</button>"}else{b+='  <button type="button" class="sos-btn '+e[j.type]+'" onclick="removeAlert();">'+f[j.type]+j.exit+"</button>"}}}b+="</footer> </div> </div>";$("body").prepend(b);$(document).find("#sos-alert-cover").animate({opacity:1},300);if(parseInt(j.tymout)>0){setTimeout(function(){removeAlert()},j.tymout)}};window.alert=sos.alert;function removeAlert(){var a=$(document).find("#sos-alert-cover");if(a.length>0){a.animate({opacity:0},300,function(){a.remove()})}}sos.form={submit:function(c,j,q,d,s){if(q&&!sos.form.validate.all(c)){console.error("Form was not submitted due to validation error(s)");return false}var h=$(c).attr("method").toLowerCase();if(h=="get"&&$(c).find("input[type=file]").length>0){sos.alert("<h2>Wrong form request [method] </h2> <p>Kindly use 'POST' [method] for forms with file upload.</p>",{type:"error"});return false}if(h=="get"){e=$(c).serialize()}else{var e=new FormData();var B=$(c).attr("id");B=(typeof B!==null&&B!==false)?B:false;var a=$(c).find("input[type=file]");var l=false;if(a.length>0){var t=c.querySelectorAll("input[type=file]");for(i=0;i<t.length;++i){var A="file-"+i+"-";for(ii=0;ii<t[i].files.length;++ii){e.append(A+ii,t[i].files[ii])}}}var g=$(c).find("input"),o=$(c).find("input[type=checkbox]"),f=$(c).find("input[type=radio]"),z=$(c).find("select"),n=$(c).find("textarea");if(g.length>0){g.each(function(){if(!in_array($(this).attr("type"),["file","checkbox","radio"])){e.append($(this).attr("name"),$(this).val())}})}if(o.length>0){o.each(function(){var D=$(this).attr("name");var C=[];$(c).find("input[name="+D+"]").each(function(){if($(this).is(":checked")){C.push($(this).val())}});if(C.length>0){e.append(D,C.join(","))}})}if(f.length>0){f.each(function(){if($(this).is(":checked")){e.append($(this).attr("name"),$(this).val())}})}if(z.length>0){z.each(function(){e.append($(this).attr("name"),$(this).val())})}if(n.length>0){n.each(function(){e.append($(this).attr("name"),$(this).val())})}if(B){l=$(document).find('input[name=file][form="'+B+'"]');if(l.length>0){var b=c.querySelectorAll('input[name=file][form="'+B+'"]');for(i=0;i<b.length;++i){var A="filex-"+i+"-";for(ii=0;ii<b[i].files.length;++ii){e.append(A+ii,b[i].files[ii])}}}var y=$(document).find('input[form="'+B+'"]'),x=$(document).find('input[type=radio][form="'+B+'"]'),u=$(document).find('input[type=checkbox][form="'+B+'"]'),r=$(document).find('select[form="'+B+'"]'),m=$(document).find('textarea[form="'+B+'"]');if(y.length>0){y.each(function(){if(!in_array($(this).attr("type"),["file","checkbox","radio"])){e.append($(this).attr("name"),$(this).val())}})}if(u.length>0){u.each(function(){if($(this).is(":checked")){e.append($(this).attr("name"),$(this).val())}})}if(x.length>0){x.each(function(){if($(this).is(":checked")){e.append($(this).attr("name"),$(this).val())}})}if(r.length>0){r.each(function(){e.append($(this).attr("name"),$(this).val())})}if(m.length>0){m.each(function(){e.append($(this).attr("name"),$(this).val())})}}}sos.alert("Please wait..",{type:"progress",exit:false});var p=$(c).data("domain")?$(c).data("domain"):document.location.origin,w=$(c).data("path")?$(c).data("path"):"";var k=p+w+$(c).attr("action");s=typeof s=="object"?s:{};var v={url:k,type:h,headers:s,data:e,contentType:false,processData:h=="post"?false:true,xhr:function(){var C=$.ajaxSettings.xhr();if(C.upload){C.upload.addEventListener("progress",sos.loader.progress,false)}return C},success:function(E){if(E.status!==undefined&&(E.status=="0.0"||E.errors.length<=0)){if(d){$(c).trigger("reset")}sos.alert(E.message,{type:"success",tymout:18000});if(typeof j=="function"){j(E)}}else{if(E.errors!==undefined&&E.message!==undefined){var D="<h3>"+E.message+"</h3>";D+="<strong>Errors:</strong> <ol>";for(i=0;i<E.errors.length;i++){D+="<li>"+E.errors[i]+"</li>"}D+="</ol>";if(E.uploaded_files){if(E.uploaded_files.length>0){D+="<strong>Uploaded Files:</strong><br><ol>";for(i=0;i<E.uploaded_files.length;i++){D+='<li> <a href="'+E.uploaded_files[i].url+'" target="_blank" title="Click to view"> File '+i+"</a></li>"}D+="</ol>"}}if(E.failed_files){if(E.failed_files.length>0){D+="<strong>Failed Files:</strong><br><ol>";for(i=0;i<E.failed_files.length;i++){D+="<li> "+E.failed_files[i].name+" | Type: "+E.failed_files[i].type+" | Size in bytes: "+fromByte(E.failed_files[i].size)+"</li>"}D+="</ol>"}}sos.alert(D,{type:"error"})}else{var C=" <h3>Response detail</h3>";if(typeof E=="object"){C+=JSON.stringify(E)}else{C+=E}sos.alert(" <h2>Error(s) encountered</h2> <div>"+C+"</div>",{type:"error"})}}},error:function(F,G,E){var C=F.responseText;var D="<h3>Sorry, error occured</h3> ";sos.alert(D+C,{type:"error"})}};v.dataType="json";$.ajax(v)}};TFsubmitForm=sos.form.submit;sos.loader={init:function(b,c){if($(document).find("#sos-loader").length<=0){b=typeof b=="boolean"?b:false;var a='<div id="sos-loader"';if(b){a+=' class="sos-loader-cover"'}a+='> <div id="sos-loader-loaded"></div>';a+="</div>";$("body").prepend(a)}},progress:function(b){sos.loader.init();var a=$(document).find("#sos-loader-loaded");a.css({width:Math.round(((b.loaded*100)/b.total))+"%"})},exit:function(){$(document).find("#sos-loader").fadeOut().remove()}};sos.form.validate={all:function(a){return true}};